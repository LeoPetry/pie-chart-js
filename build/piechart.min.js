/*! piechart 2014-06-14 */
function Piechart(a){this.Pi=3.1415,this.canvas=a,this.context=a.getContext("2d"),this.score=a.getAttribute("data-value"),this.animFlag=!1,this.track=!0,this.color="DF2FD2",this.opositeColor="333333",this.textColor="DF2FD2",this.fontStyle="italic 28px sans-serif",this.symbol="",this.radius=50,this.strokeWidth=10,this.direction=!1,this.angularSpeed=1.5,this.posx=a.width/2,this.posy=a.height/2}Piechart.prototype.scoreRadians=function(a){var b=2*a*this.Pi/100;return b},Piechart.prototype.radiansScore=function(a){var b=100*a/(2*this.Pi);return b=Math.round(b)},Piechart.prototype.drawPie=function(a,b){var c=b-a;return this.context.beginPath(),this.context.arc(this.posx,this.posy,this.radius,a,b,this.direction),this.context.lineWidth=this.strokeWidth,this.context.strokeStyle=this.color,this.context.stroke(),this.track&&(this.context.beginPath(),this.context.arc(this.posx,this.posy,this.radius,a,b,!this.direction),this.context.lineWidth=this.strokeWidth,this.context.strokeStyle=this.opositeColor,this.context.stroke()),this.radiansScore(c)},Piechart.prototype.writeMyScore=function(a,b){var c=this.drawPie(a,b);return this.context.font=this.fontStyle,this.context.fillStyle=this.textColor,this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText(String(c)+this.symbol,this.posx,this.posy),c},Piechart.prototype.makeItDance=function(a,b){if(this.animFlag)var c=(new Date).getTime()-this.startTime;else{this.startTime=(new Date).getTime();var c=0;this.animFlag=!0}var d=0==c?a:this.angularSpeed*c*this.Pi/1e3+a;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.writeMyScore(a,d);var e=this;b>d?requestAnimFrame(function(){e.makeItDance(a,b)}):(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.writeMyScore(a,b))},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();